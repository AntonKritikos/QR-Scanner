<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>Sellsmart API</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://unpkg.com/tachyons@4.8.1/css/tachyons.min.css" />
  <link href="assets/style.css" rel="stylesheet" type="text/css">
  <link href="assets/themify-icons.css" rel="stylesheet" type="text/css">
</head>

<body>

  <div id="app-root">
    <div class="loading" v-show="loading == true">IK LAAD</div>
    <transition name="slide-fade">
      <!--Scan page-->
      <section v-if="page == 'scan'" class="scan_page page" key="scan">
        <div class="wrapper">

          <div class="fl w-100">
            <qrcode-reader @capture="onCapture" id="preview">
            </qrcode-reader>
          </div>
          <div class="fl w-100 bg-light-green">
            <div class="w-80 mscan">
              <h1>Scan een qr code</h1>
            </div>
          </div>
          <div class="fl w-100">
            <div class="w-80 mscan">
              <h3>Wilt u een product die u eerder heeft besteld opnieuw bestellen?</h3>
              <h3>Scan de qr code op het product en dit gaat heel gemakkelijk </h3>
            </div>
          </div>
          <div class="fl w-third">
            <div class="output">
            </div>
          </div>
        </div>
      </section>



      <!--Product list-->

      <section v-if="page == 'list'" class="list_page page fl w-100" key="list" v-on:scroll="listScroll">
        <div class="itemlist">
          <div class="items fl w-100 bg-light-green" :key="index" v-for="(value, index) in data" @click="viewProduct(value.attributes[0].value)">
            <div class="picdiv">
              <img v-bind:src="getImage(value.attributes[1].value, index)" onerror="this.src='./assets/scandog.png'" />
            </div>
            <div class="productinfo">
              <h2>{{value.title}}</h2>
              <p v-if="value.attributes[2]">€ {{value.attributes[2].value.value}}</p>
              <p>{{value.description | limitWords(20)}}</p>
            </div>
          </div>
        </div>
      </section>

      <!--Product detail page -->

      <section v-if="page == 'product'" class="product_page page" key="product">
        <div class="pdpimg bg-green">
          <img v-bind:src="product.imageLink" alt="" />
        </div>
        <div class="pdp">
          <div class="productname">
            <h3>{{product.name}}</h3>
          </div>
          <div class="productdescription">
            <p><span v-html="product.longDescription"></span></p>
          </div>
          € {{product.salePrice.value}} {{product.salePrice.priceText}}
          <div>
            <counter :cur-amt='1' ></counter>
            <div class="addToBasket">
              <p class="ti-plus" @click='addToBasket(product.sku, $children[0].counter)'>In Winkelwagen</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Basket page -->
      <section v-if="page == 'basket'" class="basket_page page fl w-100" key="basket">
        <div class="itemlist">
          <div class="items fl w-100 bg-light-green" :key="index" v-for="(value, index) in basket">
            <div class="picdiv">
              <!-- <img v-bind:src="getImage(value.attributes[1].value, index)" onerror="this.src='./assets/scandog.png'" /> -->
            </div>
            {{value.name}}
            <div name="button" @click='changeBasketItem(value.id, $children[index].counter, index)'>
              <counter v-bind:cur-amt="value.quantity.value">@{{index}}</counter>
            </div>
            <br>
            <button type="button" name="button" @click='removeFromBasket(value.id)'>verwijder</button>
          </div>
        </div>
      </section>
    </transition>
    <div class="footer">
      <div class="listnav bg-green">
        <div class="fl w-third" @click="pageBack()">
          <div class="ti-arrow-left listnavbuttons" v-show="page != 'scan'"></div>
        </div>
        <div class="fl w-third" @click="getBasket()" >
          <span class="ti-shopping-cart listnavbuttons"></span>
        </div>
        <div class="fl w-third">
          <span class="ti-menu listnavbuttons"></span>
        </div>
      </div>

      <div v-if="page" class="bg-light-green tc">
        SellSmart
      </div>
    </div>
  </div>

  <link rel="stylesheet" href="vue-qrcode-reader/dist/vue-qrcode-reader.css" />
  <script src="js/vue.js"></script>
  <script src="vue-qrcode-reader/dist/vue-qrcode-reader.browser.js"></script>
  <script src="js/components.js"></script>
  <script src="js/master.js"></script>
</body>

</html>
